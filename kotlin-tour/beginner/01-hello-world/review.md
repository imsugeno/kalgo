# 📝 Kotlin演習レビュー
**問題**: 変数と文字列テンプレート | **難易度**: beginner | **総合スコア**: 62/100点

## ✅ 正確性 (25/40点)

- **コンパイル結果**: 成功（エラーなし）
- **実行結果**:
  ```
  Hello, Taro!
  You are 25 years old.
  Next year, you will be 26
  ```
- **模範解答との比較**: **不一致** — 3行目の末尾が異なる
  - あなたの出力: `Next year, you will be 26`
  - 期待される出力: `Next year, you will be 26 years old.`
  - 末尾の `" years old."` が欠落している
- **エッジケース**: 基本的な入力読み取りと型変換は正しく動作

| 観点 | 得点 | 備考 |
|------|------|------|
| コンパイル可否 | 10/10 | 問題なし |
| 出力一致 | 10/20 | 3行目が部分一致（末尾欠落） |
| エッジケース | 5/10 | 基本ケースは正しいが、出力仕様を満たしていない |

## 🎯 Kotlinイディオム分析 (17/30点)

- **val/var の使い分け** (3/10点):
  - 現在のコード: `var age: Int = readln().toInt()`
  - `age` はプログラム内で一度も再代入されていないのに `var` で宣言されている
  - Go言語との比較: Goでは `:=` で宣言した変数に不変/可変の区別がない。Kotlinでは**まず `val` で宣言し、再代入が必要な場合にのみ `var` を使う**のがベストプラクティス
  - なぜ改善が必要か: `var` は「この値は後で変わる」と読み手に伝える。実際に変更しないなら `val` を使うことで意図が明確になり、コンパイラが不正な再代入を検出してくれる
  - 改善の方向性: `age` の宣言キーワードを見直そう。「再代入するか？」を常に自問する習慣をつけるとよい

- **型推論の活用** (0/5点):
  - 現在のコード: `val name: String = readln()` / `var age: Int = readln().toInt()`
  - `readln()` の戻り値は `String`、`.toInt()` の戻り値は `Int` と右辺から明らか
  - Go言語との比較: Goでも `:=` でローカル変数の型推論を使う。Kotlinも同様にローカル変数で右辺から型が自明な場合は型アノテーションを省略するのがイディオマティック
  - なぜ改善が必要か: 冗長な型宣言はノイズになり、Kotlinらしい簡潔さが失われる。公開APIの戻り値型とは異なり、ローカル変数では省略が推奨される
  - 改善の方向性: 右辺の式から型が一目で分かる場合は `: Type` を外してみよう

- **標準ライブラリ活用** (10/10点):
  - `readln()` を使っている点は良い判断。`readLine()!!` より新しい関数で、非null型 `String` を直接返すため簡潔
  - 文字列テンプレート `$name` や `${age + 1}` も適切に活用できている

- **null安全性** (4/5点):
  - `readln()` は非null型を返すため `!!` が不要で、正しい選択
  - `readln().toInt()` で不正入力時の `NumberFormatException` への考慮がないが、beginner問題なので大きな問題ではない

## 📐 コードスタイル (15/20点)

- **命名規則** (5/5点): `name`, `age` ともにKotlinのcamelCase規約に準拠。適切
- **整形** (5/5点): 4スペースインデント、空行の使い方ともに問題なし
- **冗長性排除** (5/10点): 型アノテーション `: String` と `: Int` が冗長。`var` を使う必然性がない箇所での `var` 宣言も「この変数は変更される」という不要な情報を持たせている

## 🔄 Go開発者として知っておくべきこと (5/10点)

| Goの考え方 | Kotlinの考え方 | この問題での適用 |
|-----------|--------------|---------------|
| `:=` で宣言した変数はすべて再代入可能。不変/可変の区別なし | `val`（不変）がデフォルト。`var`（可変）は必要な場合のみ | `age` は変更しないので `val` で十分 |
| 型は `:=` で推論。関数引数や戻り値には明示が必要 | ローカル変数は積極的に型推論に任せる | `: String`, `: Int` は省略可能 |
| `fmt.Scanf` や `bufio.Scanner` で入力を読む | `readln()` で1行読み取り、拡張関数でチェーン変換 | `readln().toInt()` は自然なKotlinスタイル |
| エラーは `if err != nil` で明示的に処理 | 例外ベースのエラーハンドリング | 競プロ的問題では `readln()` で十分 |

Goでは変数の不変/可変を区別する仕組みがないため、Kotlinに来ると `val`/`var` の使い分けを意識する習慣が必要になる。**「まず `val`、必要になったら `var`」**を鉄則にしよう。

## 💡 改善の優先順位

- 🔴 **高**: 3行目の出力末尾に `" years old."` が欠けている — 問題の出力仕様を再確認し、期待出力と完全に一致するよう修正する
- 🔴 **高**: `var age` → 再代入しない変数には `val` を使う。Kotlinの最も基本的なイディオム
- 🟡 **中**: `: String`, `: Int` の型アノテーションを省略し、Kotlinの型推論を活用する
- 🟢 **低**: 入力値の妥当性チェック（この問題では求められていないが、意識しておくとよい）
